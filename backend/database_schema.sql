CREATE TABLE ACTIVIDAD (CODACT INT IDENTITY NOT NULL, nombre NVARCHAR(70) NOT NULL, duracion_sesion NVARCHAR(20) NOT NULL, fecha_inicio DATE NOT NULL, fecha_fin DATE NOT NULL, n_max_voluntarios INT NOT NULL, descripcion NVARCHAR(500) NOT NULL, estado NVARCHAR(20) NOT NULL, CODORG NVARCHAR(20) NOT NULL, PRIMARY KEY (CODACT));
CREATE INDEX IDX_C930A3E9ED28F88B ON ACTIVIDAD (CODORG);
CREATE TABLE VOL_PARTICIPA_ACT (CODACT INT NOT NULL, CODVOL NVARCHAR(20) NOT NULL, PRIMARY KEY (CODACT, CODVOL));
CREATE INDEX IDX_706140E930D1B74F ON VOL_PARTICIPA_ACT (CODACT);
CREATE INDEX IDX_706140E99661D5E0 ON VOL_PARTICIPA_ACT (CODVOL);
CREATE TABLE ACT_ASOCIADO_TACT (CODACT INT NOT NULL, CODTIPO INT NOT NULL, PRIMARY KEY (CODACT, CODTIPO));
CREATE INDEX IDX_9B6A42AF30D1B74F ON ACT_ASOCIADO_TACT (CODACT);
CREATE INDEX IDX_9B6A42AFDC0ED945 ON ACT_ASOCIADO_TACT (CODTIPO);
CREATE TABLE ACT_PRACTICA_ODS (CODACT INT NOT NULL, NUMODS INT NOT NULL, PRIMARY KEY (CODACT, NUMODS));
CREATE INDEX IDX_4FC76DA630D1B74F ON ACT_PRACTICA_ODS (CODACT);
CREATE INDEX IDX_4FC76DA6AC4A56 ON ACT_PRACTICA_ODS (NUMODS);
CREATE TABLE ADMINISTRADOR (id NVARCHAR(20) NOT NULL, nombre NVARCHAR(50) NOT NULL, apellidos NVARCHAR(100) NOT NULL, correo NVARCHAR(100) NOT NULL, telefono NVARCHAR(20) NOT NULL, password NVARCHAR(255) NOT NULL, foto NVARCHAR(255), PRIMARY KEY (id));
CREATE UNIQUE INDEX UNIQ_62B5A7C477040BC9 ON ADMINISTRADOR (correo) WHERE correo IS NOT NULL;
CREATE TABLE CICLO (codciclo NVARCHAR(10) NOT NULL, nombre NVARCHAR(70) NOT NULL, curso INT NOT NULL, PRIMARY KEY (codciclo));
CREATE TABLE CREDENCIALES (id INT IDENTITY NOT NULL, user_type NVARCHAR(20) NOT NULL, correo NVARCHAR(180) NOT NULL, password NVARCHAR(255) NOT NULL, CODVOL NVARCHAR(20), CODORG NVARCHAR(20), admin_id NVARCHAR(20), PRIMARY KEY (id));
CREATE UNIQUE INDEX UNIQ_6B3529C077040BC9 ON CREDENCIALES (correo) WHERE correo IS NOT NULL;
CREATE UNIQUE INDEX UNIQ_6B3529C09661D5E0 ON CREDENCIALES (CODVOL) WHERE CODVOL IS NOT NULL;
CREATE UNIQUE INDEX UNIQ_6B3529C0ED28F88B ON CREDENCIALES (CODORG) WHERE CODORG IS NOT NULL;
CREATE UNIQUE INDEX UNIQ_6B3529C0642B8210 ON CREDENCIALES (admin_id) WHERE admin_id IS NOT NULL;
CREATE TABLE DISPONIBILIDAD (dia NVARCHAR(10) NOT NULL, hora NVARCHAR(10) NOT NULL, CODVOL NVARCHAR(20) NOT NULL, PRIMARY KEY (CODVOL, dia, hora));
CREATE INDEX IDX_A042D1129661D5E0 ON DISPONIBILIDAD (CODVOL);
CREATE TABLE ODS (numods INT NOT NULL, descripcion NVARCHAR(70) NOT NULL, PRIMARY KEY (numods));
CREATE TABLE ORGANIZACION (codorg NVARCHAR(20) NOT NULL, nombre NVARCHAR(50) NOT NULL, tipo_org NVARCHAR(25) NOT NULL, correo NVARCHAR(50) NOT NULL, telefono NVARCHAR(9) NOT NULL, sector NVARCHAR(20) NOT NULL, ambito NVARCHAR(20) NOT NULL, password NVARCHAR(255) NOT NULL, persona_contacto NVARCHAR(100), descripcion NVARCHAR(500), estado NVARCHAR(20) NOT NULL, PRIMARY KEY (codorg));
CREATE UNIQUE INDEX UNIQ_9912454A77040BC9 ON ORGANIZACION (correo) WHERE correo IS NOT NULL;
CREATE UNIQUE INDEX UNIQ_9912454AC1E70A7F ON ORGANIZACION (telefono) WHERE telefono IS NOT NULL;
CREATE TABLE TIPO_ACTIVIDAD (codtipo INT IDENTITY NOT NULL, descripcion NVARCHAR(20) NOT NULL, PRIMARY KEY (codtipo));
CREATE TABLE VOLUNTARIO (codvol NVARCHAR(20) NOT NULL, nombre NVARCHAR(30) NOT NULL, apellido1 NVARCHAR(30) NOT NULL, apellido2 NVARCHAR(30), correo NVARCHAR(50) NOT NULL, telefono NVARCHAR(9) NOT NULL, fecha_nacimiento DATE NOT NULL, descripcion NVARCHAR(500), dni NVARCHAR(9) NOT NULL, password NVARCHAR(255) NOT NULL, estado NVARCHAR(10) NOT NULL, CODCICLO NVARCHAR(10) NOT NULL, PRIMARY KEY (codvol));
CREATE UNIQUE INDEX UNIQ_2AFD2CC177040BC9 ON VOLUNTARIO (correo) WHERE correo IS NOT NULL;
CREATE UNIQUE INDEX UNIQ_2AFD2CC17F8F253B ON VOLUNTARIO (dni) WHERE dni IS NOT NULL;
CREATE INDEX IDX_2AFD2CC1D5860D32 ON VOLUNTARIO (CODCICLO);
CREATE TABLE VOL_PREFIERE_TACT (CODVOL NVARCHAR(20) NOT NULL, CODTIPO INT NOT NULL, PRIMARY KEY (CODVOL, CODTIPO));
CREATE INDEX IDX_570D03019661D5E0 ON VOL_PREFIERE_TACT (CODVOL);
CREATE INDEX IDX_570D0301DC0ED945 ON VOL_PREFIERE_TACT (CODTIPO);
ALTER TABLE ACTIVIDAD ADD CONSTRAINT FK_C930A3E9ED28F88B FOREIGN KEY (CODORG) REFERENCES ORGANIZACION (CODORG);
ALTER TABLE VOL_PARTICIPA_ACT ADD CONSTRAINT FK_706140E930D1B74F FOREIGN KEY (CODACT) REFERENCES ACTIVIDAD (CODACT);
ALTER TABLE VOL_PARTICIPA_ACT ADD CONSTRAINT FK_706140E99661D5E0 FOREIGN KEY (CODVOL) REFERENCES VOLUNTARIO (CODVOL);
ALTER TABLE ACT_ASOCIADO_TACT ADD CONSTRAINT FK_9B6A42AF30D1B74F FOREIGN KEY (CODACT) REFERENCES ACTIVIDAD (CODACT);
ALTER TABLE ACT_ASOCIADO_TACT ADD CONSTRAINT FK_9B6A42AFDC0ED945 FOREIGN KEY (CODTIPO) REFERENCES TIPO_ACTIVIDAD (CODTIPO);
ALTER TABLE ACT_PRACTICA_ODS ADD CONSTRAINT FK_4FC76DA630D1B74F FOREIGN KEY (CODACT) REFERENCES ACTIVIDAD (CODACT);
ALTER TABLE ACT_PRACTICA_ODS ADD CONSTRAINT FK_4FC76DA6AC4A56 FOREIGN KEY (NUMODS) REFERENCES ODS (NUMODS);
ALTER TABLE CREDENCIALES ADD CONSTRAINT FK_6B3529C09661D5E0 FOREIGN KEY (CODVOL) REFERENCES VOLUNTARIO (CODVOL);
ALTER TABLE CREDENCIALES ADD CONSTRAINT FK_6B3529C0ED28F88B FOREIGN KEY (CODORG) REFERENCES ORGANIZACION (CODORG);
ALTER TABLE CREDENCIALES ADD CONSTRAINT FK_6B3529C0642B8210 FOREIGN KEY (admin_id) REFERENCES ADMINISTRADOR (id);
ALTER TABLE DISPONIBILIDAD ADD CONSTRAINT FK_A042D1129661D5E0 FOREIGN KEY (CODVOL) REFERENCES VOLUNTARIO (CODVOL);
ALTER TABLE VOLUNTARIO ADD CONSTRAINT FK_2AFD2CC1D5860D32 FOREIGN KEY (CODCICLO) REFERENCES CICLO (CODCICLO);
ALTER TABLE VOL_PREFIERE_TACT ADD CONSTRAINT FK_570D03019661D5E0 FOREIGN KEY (CODVOL) REFERENCES VOLUNTARIO (CODVOL);
ALTER TABLE VOL_PREFIERE_TACT ADD CONSTRAINT FK_570D0301DC0ED945 FOREIGN KEY (CODTIPO) REFERENCES TIPO_ACTIVIDAD (CODTIPO);
